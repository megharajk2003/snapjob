{"dependencies":[{"name":"./timeoutManager.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":20},"end":{"line":2,"column":53,"index":73}}],"key":"pyQHMhdGxfRLqgunhFS/8/ELubI=","exportNames":["*"]}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":74},"end":{"line":3,"column":54,"index":128}}],"key":"NIaSEHO1E48gsZc7jH9Ex1xTHgE=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.Removable = void 0;\n  var _timeoutManager = require(_dependencyMap[0], \"./timeoutManager.js\");\n  var _utils = require(_dependencyMap[1], \"./utils.js\");\n  // src/removable.ts\n\n  var Removable = class {\n    #gcTimeout;\n    destroy() {\n      this.clearGcTimeout();\n    }\n    scheduleGc() {\n      this.clearGcTimeout();\n      if ((0, _utils.isValidTimeout)(this.gcTime)) {\n        this.#gcTimeout = _timeoutManager.timeoutManager.setTimeout(() => {\n          this.optionalRemove();\n        }, this.gcTime);\n      }\n    }\n    updateGcTime(newGcTime) {\n      this.gcTime = Math.max(this.gcTime || 0, newGcTime ?? (_utils.isServer ? Infinity : 5 * 60 * 1e3));\n    }\n    clearGcTimeout() {\n      if (this.#gcTimeout) {\n        _timeoutManager.timeoutManager.clearTimeout(this.#gcTimeout);\n        this.#gcTimeout = void 0;\n      }\n    }\n  };\n  exports.Removable = Removable;\n});","lineCount":34,"map":[[6,2,2,0],[6,6,2,0,"_timeoutManager"],[6,21,2,0],[6,24,2,0,"require"],[6,31,2,0],[6,32,2,0,"_dependencyMap"],[6,46,2,0],[7,2,3,0],[7,6,3,0,"_utils"],[7,12,3,0],[7,15,3,0,"require"],[7,22,3,0],[7,23,3,0,"_dependencyMap"],[7,37,3,0],[8,2,1,0],[10,2,4,0],[10,6,4,4,"Removable"],[10,15,4,13],[10,18,4,16],[10,24,4,22],[11,4,5,2],[11,5,5,3,"gcTimeout"],[11,14,5,12],[12,4,6,2,"destroy"],[12,11,6,9,"destroy"],[12,12,6,9],[12,14,6,12],[13,6,7,4],[13,10,7,8],[13,11,7,9,"clearGcTimeout"],[13,25,7,23],[13,26,7,24],[13,27,7,25],[14,4,8,2],[15,4,9,2,"scheduleGc"],[15,14,9,12,"scheduleGc"],[15,15,9,12],[15,17,9,15],[16,6,10,4],[16,10,10,8],[16,11,10,9,"clearGcTimeout"],[16,25,10,23],[16,26,10,24],[16,27,10,25],[17,6,11,4],[17,10,11,8],[17,14,11,8,"isValidTimeout"],[17,35,11,22],[17,37,11,23],[17,41,11,27],[17,42,11,28,"gcTime"],[17,48,11,34],[17,49,11,35],[17,51,11,37],[18,8,12,6],[18,12,12,10],[18,13,12,11],[18,14,12,12,"gcTimeout"],[18,23,12,21],[18,26,12,24,"timeoutManager"],[18,56,12,38],[18,57,12,39,"setTimeout"],[18,67,12,49],[18,68,12,50],[18,74,12,56],[19,10,13,8],[19,14,13,12],[19,15,13,13,"optionalRemove"],[19,29,13,27],[19,30,13,28],[19,31,13,29],[20,8,14,6],[20,9,14,7],[20,11,14,9],[20,15,14,13],[20,16,14,14,"gcTime"],[20,22,14,20],[20,23,14,21],[21,6,15,4],[22,4,16,2],[23,4,17,2,"updateGcTime"],[23,16,17,14,"updateGcTime"],[23,17,17,15,"newGcTime"],[23,26,17,24],[23,28,17,26],[24,6,18,4],[24,10,18,8],[24,11,18,9,"gcTime"],[24,17,18,15],[24,20,18,18,"Math"],[24,24,18,22],[24,25,18,23,"max"],[24,28,18,26],[24,29,19,6],[24,33,19,10],[24,34,19,11,"gcTime"],[24,40,19,17],[24,44,19,21],[24,45,19,22],[24,47,20,6,"newGcTime"],[24,56,20,15],[24,61,20,20,"isServer"],[24,76,20,28],[24,79,20,31,"Infinity"],[24,87,20,39],[24,90,20,42],[24,91,20,43],[24,94,20,46],[24,96,20,48],[24,99,20,51],[24,102,20,54],[24,103,21,4],[24,104,21,5],[25,4,22,2],[26,4,23,2,"clearGcTimeout"],[26,18,23,16,"clearGcTimeout"],[26,19,23,16],[26,21,23,19],[27,6,24,4],[27,10,24,8],[27,14,24,12],[27,15,24,13],[27,16,24,14,"gcTimeout"],[27,25,24,23],[27,27,24,25],[28,8,25,6,"timeoutManager"],[28,38,25,20],[28,39,25,21,"clearTimeout"],[28,51,25,33],[28,52,25,34],[28,56,25,38],[28,57,25,39],[28,58,25,40,"gcTimeout"],[28,67,25,49],[28,68,25,50],[29,8,26,6],[29,12,26,10],[29,13,26,11],[29,14,26,12,"gcTimeout"],[29,23,26,21],[29,26,26,24],[29,31,26,29],[29,32,26,30],[30,6,27,4],[31,4,28,2],[32,2,29,0],[32,3,29,1],[33,2,29,2,"exports"],[33,9,29,2],[33,10,29,2,"Removable"],[33,19,29,2],[33,22,29,2,"Removable"],[33,31,29,2],[34,0,29,2],[34,3]],"functionMap":{"names":["<global>","Removable","Removable#destroy","Removable#scheduleGc","timeoutManager.setTimeout$argument_0","Removable#updateGcTime","Removable#clearGcTimeout"],"mappings":"AAA;gBCG;ECE;GDE;EEC;kDCG;ODE;GFE;EIC;GJK;EKC;GLK;CDC"}},"type":"js/module"}]}